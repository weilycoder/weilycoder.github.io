---
title: Nim 游戏及部分变种
mathjax: true
date: 2025-07-28T22:32:47.987+0800
categories:
  - Math
tags:
  - games
---

### Nim 游戏

一般来说，Nim 游戏的规则如下：

> 有 $n$ 堆石子（排成一行），第 $i$ 堆有 $a\_i$ 个，两名玩家轮流取走任意一堆的任意（正整数）个石子。
>
> 无法行动的玩家失败（经典规则下，即拿走最后一枚石子的玩家获胜）。

显然对于一堆石子的情形，其 SG 函数值为 $a\_i$；由 SG 定理，整局游戏的 SG 函数值为 $\begin{aligned}\bigoplus\_{i=1}^{n} a\_i\end{aligned}$。

SG 函数值非零时先手必胜（N 态），SG 函数值为零时后手必胜（先手必败，P 态）。

### 变种 1：每次只能从最左侧或最右侧取

TODO

### 变种 2：每次只能从最多的一堆中取，并列时任选

设初始状态为 $A=\left\\{a\_1,a\_2,\ldots,a\_{n-1},a\_{n}\right\\}$，不妨令序列不降。

* 若 $a\_n \gt a\_{n-1}$，则 $B=\left\\{a\_1,a\_2,\ldots,a\_{n-1},a\_{n-1}\right\\}$ 为后继状态之一。
  + 若 $B$ 为 P 态，则 $A$ 已经为 N 态；
  + 若 $B$ 为 N 态，则其后继状态存在 P 态，又注意到 $B$ 的后继均为 $A$ 的后继，因此 $A$ 为 N 态。
* 假设石子最多的堆共有 $m$ 堆，由上述结论，显然 $m$ 为 $2$ 的倍数时为 P 态，否则为 N 态。

### 变种 3：每次只能从最少的一堆中取，并列时任选

TODO

### 变种 4：先手可以任选一堆，今后不能选择与上一堆相同的

TODO

### 变种 5：先手可以任选一堆，今后必须选择与上一堆相邻的

TODO

### 变种 6：先手可以任选一堆，今后必须选择与上一堆相同的，除非已经取尽

TODO

### 变种 7：每次取完后，可以立刻从另一堆中取走同样多的石子

TODO

### 变种 8：每次取石子的数量上限为 3

TODO

### 变种 9：无法行动的玩家胜利

TODO

### 变种 10：游戏中有且只有一次跳过的机会

TODO

### 变种 11：每次玩家取完后，若存在其他取法，对手可以要求更换方法，每轮限一次

TODO
